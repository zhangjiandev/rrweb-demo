<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
<!--    <script src="https://cdn.jsdelivr.net/npm/rrweb@latest/dist/rrweb.min.js"></script>-->
    <script src="/rrweb-record.js"></script>
</head>
<body>
<button onclick="drawCanvas2DIframe()">draw</button>
<h1>iframe</h1>
<canvas id="test-canvas-iframe" width="200" heigth="100">
    <p>你的浏览器不支持Canvas</p>
</canvas>
</body>
<script>
    rrwebRecord({
        emit(event) {
            // 用任意方式存储 event
            console.log('iframe:', event);
            //window.parent.postMessage({ type: 'iframeEvent', data: event }, '*');
        },
        recordCanvas: true,
        sampling: {
            canvas: 15,
        },
        // 图像的格式
        dataURLOptions: {
            type: 'image/webp',
            quality: 0.6,
        },
    });
    function drawCanvas2DIframe() {
        let
            canvas = document.getElementById('test-canvas-iframe'),
            ctx = canvas.getContext('2d');

        ctx.clearRect(0, 0, 200, 200); // 擦除(0,0)位置大小为200x200的矩形，擦除的意思是把该区域变为透明
        ctx.fillStyle = '#dddddd'; // 设置颜色
        ctx.fillRect(10, 10, 130, 130); // 把(10,10)位置大小为130x130的矩形涂色
        // 利用Path绘制复杂路径:
        let path=new Path2D();
        path.arc(75, 75, 50, 0, Math.PI*2, true);
        path.moveTo(110,75);
        path.arc(75, 75, 35, 0, Math.PI, false);
        path.moveTo(65, 65);
        path.arc(60, 65, 5, 0, Math.PI*2, true);
        path.moveTo(95, 65);
        path.arc(90, 65, 5, 0, Math.PI*2, true);
        ctx.strokeStyle = '#ff7300';
        ctx.stroke(path);
    }
</script>
</html>